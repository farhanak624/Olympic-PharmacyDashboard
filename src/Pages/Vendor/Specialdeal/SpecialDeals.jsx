import React, { useEffect, useRef, useState } from "react";
import Swal from "sweetalert2";

import { toast } from "react-toastify";
import { useDispatch } from "react-redux";
import { getAllSpecialDeals } from "../../../Api/VendorApi";
import { loadSpinner } from "../../../Redux/Features/NavbarSlice";
import SpecialModal from "./SpecialModal";

function VendorSpecialDeals() {
  const dispatch = useDispatch();
  const [isOpen, setIsOpen] = useState(false);
  const [allDeals, setAllDeals] = useState([]);
  const [loading, setloading] = useState(true);
  const [page, setPage] = useState(1);
  const loader = useRef(null);
  const [totalpages, setTotalPage] = useState(0);
  useEffect(() => {
    if (totalpages < 12) {
      return;
    }
    // Function to check if the document height is greater than the viewport height
    const isScrollRequired = () => {
      return document.documentElement.scrollHeight > window.innerHeight;
    };

    const options = {
      root: null,
      rootMargin: "20px",
      threshold: 0,
    };

    const observerCallback = (entities) => {
      const target = entities[0];
      if (target.isIntersecting) {
        setPage((prev) => prev + 1);
      }
    };

    const observer = new IntersectionObserver(observerCallback, options);

    // Setup observer if scrolling is required
    const setupObserver = () => {
      if (loader.current && isScrollRequired()) {
        observer.observe(loader.current);
      } else {
        // Use a timeout to retry after some time, in case content or images are still loading
        setTimeout(setupObserver, 500);
      }
    };

    setupObserver();

    return () => {
      if (loader.current) {
        observer.unobserve(loader.current);
      }
    };
  }, []);
  useEffect(() => {
    getAllDeals();
  }, []);
  const getAllDeals = () => {
    dispatch(loadSpinner());
    getAllSpecialDeals()
      .then((data) => {
        console.log("ssfiraetae", data?.data);
        console.log(data?.data?.deals?.products);
        setAllDeals((prev) => [...prev, ...data?.data?.deals?.products]);
        setloading(false);
      })
      .catch((err) => {
        setloading(false);
        console.log(err);
      })
      .finally(() => {
        dispatch(loadSpinner());
      });
  };
  const localDate = (isoDateString) => {
    const date = new Date(isoDateString);

    // Convert to local date string in dd/mm/yy format
    const localDateString = date.toLocaleDateString("en-GB", {
      day: "2-digit",
      month: "2-digit",
      year: "2-digit",
    });
    return localDateString;
  };
  return (
    <div className="relative">
      {isOpen && <SpecialModal callback={getAllDeals} setOpen={setIsOpen} />}
      <div className="flex flex-col md:flex-row justify-between gap-4 mb-7">
        <h1 className="text-2xl font-bold ">Special Deals</h1>
        <button
          onClick={() => setIsOpen(true)}
          className="bg-navblue flex justify-center items-center max-w-[200px] text-textColor2 gap-3 px-5 p-1 rounded-lg"
        >
          <svg
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12.8235 6.64706H7.35294V1.17647C7.35294 1.07906 7.27388 1 7.17647 1H6.82353C6.72612 1 6.64706 1.07906 6.64706 1.17647V6.64706H1.17647C1.07906 6.64706 1 6.72612 1 6.82353V7.17647C1 7.27388 1.07906 7.35294 1.17647 7.35294H6.64706V12.8235C6.64706 12.9206 6.72612 13 6.82353 13H7.17647C7.27388 13 7.35294 12.9206 7.35294 12.8235V7.35294H12.8235C12.9206 7.35294 13 7.27388 13 7.17647V6.82353C13 6.72612 12.9206 6.64706 12.8235 6.64706Z"
              fill="black"
              stroke="black"
            />
          </svg>
          Add Deal
        </button>
      </div>

      <div
        className="bg-containerWhite overflow-x-auto p-3 rounded-xl"
        style={{ scrollbarWidth: "none" }}
      >
        <table className="min-w-full text-center  leading-normal">
          <thead className="bg-subContainerColor" style={{ height: "40px" }}>
            <tr>
              <th className="px-5 py-3  text-left text-xs font-semibold text-textColor uppercase tracking-wider ">
                <div className="flex items-center  gap-3">
                  <svg
                    width="15"
                    height="18"
                    viewBox="0 0 15 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M14.7028 4.40664L7.53254 0.0341903C7.45789 -0.0113968 7.36583 -0.0113968 7.29099 0.0341903L0.120776 4.40664C0.0461245 4.45222 0 4.53636 0 4.62753V13.3724C0 13.4636 0.0459392 13.5477 0.120776 13.5933L7.29099 17.9658C7.32841 17.9887 7.37009 18 7.41176 18C7.45344 18 7.49512 17.9887 7.53254 17.9658L14.7028 13.5933C14.7774 13.5477 14.8235 13.4636 14.8235 13.3724V4.62753C14.8235 4.53636 14.7774 4.45222 14.7028 4.40664ZM7.41176 8.70532L5.33209 7.4371L12.0194 3.35931L14.0989 4.62753L7.41176 8.70532ZM3.04551 6.63199L4.60762 7.58462V10.2756L3.04551 9.323V6.63199ZM3.28706 6.19021L9.97435 2.11241L11.5365 3.06505L4.84917 7.14264L3.28706 6.19021ZM7.41176 0.54954L9.49125 1.81756L2.80414 5.89555L0.724653 4.62733L7.41176 0.54954ZM0.483102 5.06931L2.56259 6.33753V9.47032C2.56259 9.5615 2.60853 9.64563 2.68337 9.69122L4.7284 10.9383C4.76582 10.961 4.8075 10.9725 4.84917 10.9725C4.89085 10.9725 4.93253 10.9612 4.96995 10.9383C5.0446 10.8927 5.09073 10.8086 5.09073 10.7174V7.87908L7.1704 9.1473V17.3033L0.483102 13.2251V5.06931ZM7.65332 17.3031V9.14711L14.3404 5.06931V13.2253L7.65332 17.3031Z"
                      fill="#00D67B"
                    />
                  </svg>
                  Product Name
                </div>
              </th>
              <th className="px-5 py-3  text-left text-xs font-semibold text-textColor uppercase tracking-wider ">
                <div className="flex justify-center  gap-3 ">
                  <svg
                    width="21"
                    height="18"
                    viewBox="0 0 21 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M16.6154 1.03846C16.6154 0.463846 16.1515 0 15.5769 0H10.7308H6.57692H1.03846C0.463846 0 0 0.463846 0 1.03846V16.2692C0 16.8438 0.463846 17.3077 1.03846 17.3077H11.1392C11.2846 17.7092 11.6654 18 12.1154 18H19.0385C19.6131 18 20.0769 17.5362 20.0769 16.9615V10.0385C20.0769 9.46385 19.6131 9 19.0385 9H16.6154V1.03846ZM6.92308 0.692308H10.3846V2.07692H6.92308V0.692308ZM6.92308 2.76923H10.3846V5.04692L10.2808 4.94308C10.1423 4.80462 9.92769 4.80462 9.78923 4.94308L9.34615 5.39308L8.89615 4.94308C8.83385 4.88077 8.74385 4.84615 8.65385 4.84615C8.56385 4.84615 8.47385 4.88077 8.41154 4.95L7.96154 5.39308L7.51154 4.94308C7.37308 4.80462 7.15846 4.80462 7.02 4.94308L6.91615 5.04692V2.76923H6.92308ZM11.0769 10.0385V16.6154H1.03846C0.844615 16.6154 0.692308 16.4631 0.692308 16.2692V1.03846C0.692308 0.844615 0.844615 0.692308 1.03846 0.692308H6.23077V5.88462C6.23077 6.02308 6.31385 6.14769 6.44538 6.20308C6.57692 6.25846 6.72231 6.22385 6.81923 6.12692L7.26923 5.68385L7.71923 6.13385C7.85769 6.27231 8.07231 6.27231 8.21077 6.13385L8.65385 5.68385L9.10385 6.13385C9.24231 6.27231 9.45692 6.27231 9.59539 6.13385L10.0385 5.68385L10.4885 6.13385C10.5508 6.19615 10.6408 6.23077 10.7308 6.23077C10.7723 6.23077 10.8208 6.22385 10.8623 6.20308C10.9938 6.14769 11.0769 6.02308 11.0769 5.88462V0.692308H15.5769C15.7708 0.692308 15.9231 0.844615 15.9231 1.03846V9H12.1154C11.5408 9 11.0769 9.46385 11.0769 10.0385ZM19.0385 9.69231C19.2323 9.69231 19.3846 9.84462 19.3846 10.0385V16.9615C19.3846 17.1554 19.2323 17.3077 19.0385 17.3077H12.1154C11.9215 17.3077 11.7692 17.1554 11.7692 16.9615V10.0385C11.7692 9.84462 11.9215 9.69231 12.1154 9.69231H19.0385Z"
                      fill="#FF9900"
                    />
                  </svg>
                  Product Prize
                </div>
              </th>

              <th className="px-5 py-3  text-left text-xs font-semibold text-textColor uppercase tracking-wider ">
                <div className="flex justify-center gap-3">
                  <svg
                    width="20"
                    height="18"
                    viewBox="0 0 20 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M4.96179 12.3669H6.63503C6.96375 12.3669 7.23173 12.6332 7.23173 12.9599V13.0175C9.7052 11.6776 8.75383 12.5001 11.1151 12.5825C11.658 12.6024 12.2311 12.6088 12.7476 12.6885C13.4532 12.7968 14.0077 13.0359 14.0972 13.5833L15.6272 13.3796L17.4998 12.0854C17.8772 11.797 18.2778 11.7785 18.5851 11.9195C18.8587 12.0462 19.0492 12.2996 19.0924 12.5987C19.1447 12.9553 18.9899 13.3838 18.4984 13.7478L15.4482 16.0045C15.4218 16.0243 15.3944 16.0386 15.3652 16.0464L11.6066 17.2923C11.5699 17.3052 11.5314 17.3093 11.4948 17.3066L7.99487 16.9997L7.23126 17.044V17.407C7.23126 17.7337 6.96328 18 6.63457 18H4.96132C4.64744 18 4.38688 17.7558 4.36602 17.4476L0.312951 17.7765C0.140944 17.795 0 17.6655 0 17.5024V12.9115H0.00139084C0.00139084 12.7507 0.139553 12.624 0.300897 12.636L4.36463 12.9663C4.36509 12.6309 4.63214 12.3669 4.96179 12.3669ZM7.23173 13.6469V16.4915L8.02686 16.4473L11.4874 16.7514L15.1543 15.5355L18.1679 13.3045C18.4702 13.0811 18.5698 12.8525 18.5439 12.6765C18.4966 12.3591 18.0997 12.3015 17.8419 12.5185L15.8905 13.8689C15.8562 13.8938 15.8145 13.9095 15.7695 13.9159L14.0059 14.1509C13.7286 14.6706 12.9293 14.7218 11.6812 14.8015C11.3975 14.8199 11.0873 14.8393 10.7257 14.8692C10.5717 14.8812 10.4377 14.7674 10.4262 14.6158C10.4141 14.4628 10.5286 14.3297 10.6825 14.3182C11.0122 14.2919 11.3437 14.2698 11.646 14.2514C12.7735 14.1795 13.4541 14.1353 13.5385 13.8372C13.5427 13.8229 13.5478 13.8095 13.5529 13.7966C13.5622 13.4621 13.1718 13.311 12.6646 13.2322C12.1861 13.1576 11.6015 13.1511 11.0966 13.1331C8.56931 13.0447 9.81277 12.2388 7.23173 13.6469ZM6.63503 12.9193H4.96179C4.94092 12.9193 4.92099 12.9378 4.92099 12.9599V17.407C4.92099 17.4305 4.94185 17.4476 4.96179 17.4476H6.63503C6.6559 17.4476 6.67444 17.4291 6.67444 17.407V12.9599C6.67444 12.9378 6.6559 12.9193 6.63503 12.9193ZM4.36509 13.5215L0.557749 13.2119V17.2034L4.36509 16.8937V13.5215ZM10.7076 4.96962C11.5671 5.39258 11.4897 6.63752 10.5907 6.9559C10.0256 7.15586 9.40152 6.8619 9.20031 6.30025C8.99909 5.7386 9.29489 5.11936 9.86006 4.91986C10.1164 4.82863 10.4067 4.8337 10.6737 4.95395C10.6853 4.95764 10.6974 4.96317 10.7076 4.96962ZM10.8128 5.72939C10.626 5.2069 9.89668 5.17695 9.66023 5.67041C9.42378 6.16664 9.91013 6.70755 10.4345 6.52187C10.7604 6.40623 10.9283 6.05237 10.8128 5.72939ZM8.88226 1.56055C9.75342 1.97061 9.69454 3.23214 8.78258 3.55512C8.21741 3.75647 7.59429 3.46251 7.39354 2.90086C7.19093 2.33921 7.48673 1.71997 8.05189 1.51908C8.31338 1.42601 8.6115 1.43246 8.88226 1.56055ZM9.00558 2.32861C8.81781 1.80613 8.08806 1.77756 7.85299 2.27102C7.61654 2.76725 8.10289 3.30816 8.62726 3.1211C8.9518 3.00637 9.12149 2.65252 9.00558 2.32861ZM10.2843 1.68357C10.3381 1.56884 10.4762 1.51908 10.5917 1.57391C10.7071 1.62736 10.7558 1.76466 10.702 1.87939L8.42743 6.64766C8.37226 6.76238 8.2341 6.81214 8.11866 6.75732C8.00414 6.70387 7.95453 6.56657 8.00831 6.45184L10.2843 1.68357ZM9.32132 0C11.6766 0 13.5849 1.89782 13.5849 4.23795C13.5849 4.80098 13.4745 5.33914 13.2733 5.83121L15.1496 9.24028C15.2586 9.42458 15.1037 9.61901 14.9211 9.59275L13.4017 9.3656L12.7763 10.7566C12.6989 10.9289 12.4545 10.9409 12.3623 10.7736L10.9259 8.16398C9.90086 8.57819 8.74178 8.57819 7.71669 8.16398L6.28036 10.7736C6.18856 10.9409 5.94376 10.9289 5.86772 10.7566L5.24089 9.3656L3.72157 9.59275C3.5389 9.61901 3.38266 9.42412 3.493 9.24028L5.36978 5.83167C4.7207 4.24348 5.10412 2.43735 6.30678 1.24079C7.0778 0.474108 8.14369 0 9.32132 0ZM13.0262 6.33711C12.6307 7.02547 12.047 7.59219 11.3451 7.96816L12.5436 10.148L13.0522 9.0182C13.0957 8.92283 13.1968 8.87076 13.2965 8.88505L14.5279 9.06796L13.0262 6.33711ZM7.2971 7.96816C6.59516 7.59219 6.01191 7.02501 5.61597 6.33711L4.1138 9.06796L5.34521 8.88505C5.44489 8.87076 5.54643 8.92283 5.58954 9.0182L6.09815 10.148L7.2971 7.96816ZM12.009 1.567C10.524 0.0926101 8.11773 0.0926101 6.63364 1.567C5.14956 3.04139 5.15002 5.43313 6.63364 6.90752C8.11726 8.38329 10.524 8.38329 12.009 6.90752C13.4926 5.43313 13.4926 3.04185 12.009 1.567Z"
                      fill="#B40202"
                    />
                  </svg>
                  Discount (%)
                </div>
              </th>
              <th className="px-5 py-3  text-left text-xs font-semibold text-textColor uppercase tracking-wider ">
                <div className="flex justify-center gap-3">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M13.3333 1.77778H14.2266C15.206 1.77778 16 2.5729 16 3.55028V14.2275C16 15.2064 15.2066 16 14.2266 16H1.77341C0.793983 16 0 15.2049 0 14.2275V3.55028C0 2.57135 0.793442 1.77778 1.77341 1.77778H2.66667V0.435981C2.66667 0.195195 2.87283 0 3.11111 0C3.35657 0 3.55556 0.191162 3.55556 0.435981V1.77778H12.4444V0.435981C12.4444 0.195195 12.6506 0 12.8889 0C13.1343 0 13.3333 0.191162 13.3333 0.435981V1.77778ZM13.3333 2.66667V3.11957C13.3333 3.36036 13.1272 3.55556 12.8889 3.55556C12.6434 3.55556 12.4444 3.36439 12.4444 3.11957V2.66667H3.55556V3.11957C3.55556 3.36036 3.34939 3.55556 3.11111 3.55556C2.86565 3.55556 2.66667 3.36439 2.66667 3.11957V2.66667H1.77341C1.28449 2.66667 0.888889 3.06215 0.888889 3.55028V14.2275C0.888889 14.7145 1.28546 15.1111 1.77341 15.1111H14.2266C14.7155 15.1111 15.1111 14.7156 15.1111 14.2275V3.55028C15.1111 3.06327 14.7145 2.66667 14.2266 2.66667H13.3333ZM0.888889 4.44444H15.1111V5.33333H0.888889V4.44444ZM11.5556 7.55972C11.5556 7.31196 11.7458 7.11111 12.0042 7.11111H12.8847C13.1325 7.11111 13.3333 7.30136 13.3333 7.55972V8.44028C13.3333 8.68804 13.1431 8.88889 12.8847 8.88889H12.0042C11.7564 8.88889 11.5556 8.69864 11.5556 8.44028V7.55972ZM7.11111 7.55972C7.11111 7.31196 7.30136 7.11111 7.55972 7.11111H8.44028C8.68804 7.11111 8.88889 7.30136 8.88889 7.55972V8.44028C8.88889 8.68804 8.69864 8.88889 8.44028 8.88889H7.55972C7.31196 8.88889 7.11111 8.69864 7.11111 8.44028V7.55972ZM2.66667 7.55972C2.66667 7.31196 2.85692 7.11111 3.11528 7.11111H3.99584C4.2436 7.11111 4.44444 7.30136 4.44444 7.55972V8.44028C4.44444 8.68804 4.25419 8.88889 3.99584 8.88889H3.11528C2.86752 8.88889 2.66667 8.69864 2.66667 8.44028V7.55972ZM2.66667 12.0042C2.66667 11.7564 2.85692 11.5556 3.11528 11.5556H3.99584C4.2436 11.5556 4.44444 11.7458 4.44444 12.0042V12.8847C4.44444 13.1325 4.25419 13.3333 3.99584 13.3333H3.11528C2.86752 13.3333 2.66667 13.1431 2.66667 12.8847V12.0042ZM7.11111 12.0042C7.11111 11.7564 7.30136 11.5556 7.55972 11.5556H8.44028C8.68804 11.5556 8.88889 11.7458 8.88889 12.0042V12.8847C8.88889 13.1325 8.69864 13.3333 8.44028 13.3333H7.55972C7.31196 13.3333 7.11111 13.1431 7.11111 12.8847V12.0042ZM11.5556 12.0042C11.5556 11.7564 11.7458 11.5556 12.0042 11.5556H12.8847C13.1325 11.5556 13.3333 11.7458 13.3333 12.0042V12.8847C13.3333 13.1325 13.1431 13.3333 12.8847 13.3333H12.0042C11.7564 13.3333 11.5556 13.1431 11.5556 12.8847V12.0042Z"
                      fill="#9747FF"
                    />
                  </svg>
                  Starting on
                </div>
              </th>
              <th className="px-5 py-3  text-left text-xs font-semibold text-textColor uppercase tracking-wider ">
                <div className="flex justify-center gap-3">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M13.3333 1.77778H14.2266C15.206 1.77778 16 2.5729 16 3.55028V14.2275C16 15.2064 15.2066 16 14.2266 16H1.77341C0.793983 16 0 15.2049 0 14.2275V3.55028C0 2.57135 0.793442 1.77778 1.77341 1.77778H2.66667V0.435981C2.66667 0.195195 2.87283 0 3.11111 0C3.35657 0 3.55556 0.191162 3.55556 0.435981V1.77778H12.4444V0.435981C12.4444 0.195195 12.6506 0 12.8889 0C13.1343 0 13.3333 0.191162 13.3333 0.435981V1.77778ZM13.3333 2.66667V3.11957C13.3333 3.36036 13.1272 3.55556 12.8889 3.55556C12.6434 3.55556 12.4444 3.36439 12.4444 3.11957V2.66667H3.55556V3.11957C3.55556 3.36036 3.34939 3.55556 3.11111 3.55556C2.86565 3.55556 2.66667 3.36439 2.66667 3.11957V2.66667H1.77341C1.28449 2.66667 0.888889 3.06215 0.888889 3.55028V14.2275C0.888889 14.7145 1.28546 15.1111 1.77341 15.1111H14.2266C14.7155 15.1111 15.1111 14.7156 15.1111 14.2275V3.55028C15.1111 3.06327 14.7145 2.66667 14.2266 2.66667H13.3333ZM0.888889 4.44444H15.1111V5.33333H0.888889V4.44444ZM11.5556 7.55972C11.5556 7.31196 11.7458 7.11111 12.0042 7.11111H12.8847C13.1325 7.11111 13.3333 7.30136 13.3333 7.55972V8.44028C13.3333 8.68804 13.1431 8.88889 12.8847 8.88889H12.0042C11.7564 8.88889 11.5556 8.69864 11.5556 8.44028V7.55972ZM7.11111 7.55972C7.11111 7.31196 7.30136 7.11111 7.55972 7.11111H8.44028C8.68804 7.11111 8.88889 7.30136 8.88889 7.55972V8.44028C8.88889 8.68804 8.69864 8.88889 8.44028 8.88889H7.55972C7.31196 8.88889 7.11111 8.69864 7.11111 8.44028V7.55972ZM2.66667 7.55972C2.66667 7.31196 2.85692 7.11111 3.11528 7.11111H3.99584C4.2436 7.11111 4.44444 7.30136 4.44444 7.55972V8.44028C4.44444 8.68804 4.25419 8.88889 3.99584 8.88889H3.11528C2.86752 8.88889 2.66667 8.69864 2.66667 8.44028V7.55972ZM2.66667 12.0042C2.66667 11.7564 2.85692 11.5556 3.11528 11.5556H3.99584C4.2436 11.5556 4.44444 11.7458 4.44444 12.0042V12.8847C4.44444 13.1325 4.25419 13.3333 3.99584 13.3333H3.11528C2.86752 13.3333 2.66667 13.1431 2.66667 12.8847V12.0042ZM7.11111 12.0042C7.11111 11.7564 7.30136 11.5556 7.55972 11.5556H8.44028C8.68804 11.5556 8.88889 11.7458 8.88889 12.0042V12.8847C8.88889 13.1325 8.69864 13.3333 8.44028 13.3333H7.55972C7.31196 13.3333 7.11111 13.1431 7.11111 12.8847V12.0042ZM11.5556 12.0042C11.5556 11.7564 11.7458 11.5556 12.0042 11.5556H12.8847C13.1325 11.5556 13.3333 11.7458 13.3333 12.0042V12.8847C13.3333 13.1325 13.1431 13.3333 12.8847 13.3333H12.0042C11.7564 13.3333 11.5556 13.1431 11.5556 12.8847V12.0042Z"
                      fill="#212E47"
                    />
                  </svg>
                  Expires on
                </div>
              </th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          {/* Body start */}
          <tbody>
            {/* first row */}
            {allDeals?.length > 0 &&
              allDeals?.map((data) => {
                console.log(data);
                return (
                  <tr className="border-b border-gray-300 text-textColor">
                    <td className="px-25 py-1  text-left text-xs font-semibold  capitalize tracking-wider ">
                      <div className="flex mt-5 px-5 gap-3 items-center">
                        {data?.product?.images?.length > 0 && (
                          <img
                            src={data?.product?.images[0]}
                            className="h-10"
                            alt=""
                          />
                        )}
                        {data?.product?.productName}
                      </div>
                    </td>
                    <td className=" text-center">${data?.product?.price}</td>
                    <td className=" text-center">{data?.offer}%</td>
                    <td className=" text-center">
                      {localDate(data?.validity?.startDate)}
                    </td>
                    <td className=" text-center">
                      {localDate(data?.validity?.endDate)}
                    </td>

                    <td>
                      <div
                        className="flex items-center cursor-pointer justify-center"
                        onClick={() =>
                          Swal.fire({
                            title: "Are you sure?",
                            text: "you want delete this!",
                            icon: "warning",
                            showCancelButton: true,
                            confirmButtonColor: "#3085d6",
                            cancelButtonColor: "#d33",
                            confirmButtonText: "Yes, delete it!",
                          }).then((result) => {
                            if (result.isConfirmed) {
                              // Call your delete function here
                              deleteDeals(data?.product?._id)
                                .then((data) => {
                                  getAllDeals();
                                  Swal.fire(
                                    "Deleted!",
                                    "Your item has been deleted.",
                                    "success"
                                  );
                                })
                                .catch((err) => {
                                  console.log(err);
                                  toast("something wrong");
                                });
                            }
                          })
                        }
                      >
                        <svg
                          width="30"
                          height="30"
                          viewBox="0 0 30 30"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <circle cx="15" cy="15" r="15" fill="#FF8E85" />
                          <path
                            d="M11.4539 10.3129H13.4629V9.3151C13.4629 9.13129 13.5951 9 13.7801 9C13.7801 9 13.7801 9 13.8066 9L17.0051 9.02626C17.1637 9.02626 17.2959 9.15755 17.2959 9.3151V10.3129H19.1992H20.468C20.6266 10.3129 20.7588 10.4705 20.7588 10.628C20.7588 10.7856 20.6266 10.9168 20.468 10.9168H19.6221V20.2648C19.6221 20.4486 19.5428 20.6324 19.4107 20.7899C19.2785 20.9212 19.0934 21 18.882 21H11.9033C11.6918 21 11.5068 20.9212 11.3746 20.7899C11.2424 20.6324 11.1367 20.4486 11.1367 20.2648V10.9168H10.3172C10.1322 10.9168 10 10.7856 10 10.628C10 10.4705 10.1322 10.3129 10.3172 10.3129H11.1367H11.4539ZM14.0709 10.3129H16.6879V9.60394H14.0709V10.3129ZM17.4545 18.2954C17.4545 18.453 17.3223 18.5842 17.1637 18.5842C17.0051 18.5842 16.873 18.453 16.873 18.2954V13.0175C16.873 12.86 17.0051 12.7287 17.1637 12.7287C17.3223 12.7287 17.4545 12.86 17.4545 13.0175V18.2954ZM15.6834 18.2954C15.6834 18.453 15.5512 18.5842 15.3926 18.5842C15.2076 18.5842 15.0754 18.453 15.0754 18.2954V13.0175C15.0754 12.86 15.2076 12.7287 15.3926 12.7287C15.5512 12.7287 15.6834 12.86 15.6834 13.0175V18.2954ZM13.9123 18.2954C13.9123 18.453 13.7801 18.5842 13.5951 18.5842C13.4365 18.5842 13.3043 18.453 13.3043 18.2954V13.0175C13.3043 12.86 13.4365 12.7287 13.5951 12.7287C13.7801 12.7287 13.9123 12.86 13.9123 13.0175V18.2954ZM19.0406 10.9168H13.7801H11.7447V20.2648C11.7447 20.291 11.7447 20.3435 11.7975 20.3698C11.824 20.3961 11.8504 20.3961 11.9033 20.3961H18.882C18.9084 20.3961 18.9613 20.3961 18.9877 20.3698C19.0141 20.3435 19.0406 20.291 19.0406 20.2648V10.9168Z"
                            fill="white"
                          />
                        </svg>
                      </div>
                    </td>
                  </tr>
                );
              })}

            {/* first row */}
          </tbody>
        </table>
        {allDeals?.length > 1 ||
          (!allDeals.length && !loading && (
            <div className="w-full p-4 text-center text-red-700">
              oops No Special Deals
            </div>
          ))}
        <div ref={loader} className="h-10"></div>
      </div>
    </div>
  );
}

export default VendorSpecialDeals;
